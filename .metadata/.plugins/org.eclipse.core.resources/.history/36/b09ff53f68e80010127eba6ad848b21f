const BASE_URL = "http://127.0.0.1:8080";


function showSection(id){
    document.querySelectorAll(".section").forEach(section => section.style.display = "none");
    document.getElementById(id).style.display = "block";    
}

// Create Account
function createAccount(){
    const data = {
        name: document.getElementById("c-name").value,
        email: document.getElementById("c-email").value,
        balance: document.getElementById("c-balance").value
    };
    fetch(BASE_URL+"/accounts/create", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
    })
    .then(response => response.json())
    .then(result => {
        document.getElementById("create-result").innerText = 
            "Account created successfully with ID: " + result.accountNumber;

        console.log("Account Creation Response:", result);
    })
    
}

// Deposit
function depositMoney(){
    const data = {
        accNo: document.getElementById("d-acc").value,
        amount: parseFloat(document.getElementById("d-amount").value)
    };
    fetch(BASE_URL+"/accounts/deposit", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
    })
    .then(response => response.text())
    .then(msg => {
        document.getElementById("deposit-result").innerText = msg;
            console.log("Amount is deposited successfully..!");
    });
    
}

// Withdraw
function withdrawMoney(){
    const data = {
        accNo: document.getElementById("w-acc").value,
        amount: document.getElementById("w-amount").value
    };
    fetch(BASE_URL+"/accounts/withdraw", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
    })
    .then(response => response.text())
    .then(msg => {
        document.getElementById("withdraw-result").innerText = msg;
            console.log("Amount is withdrawn successfully..!");
    })
}

// Transfer
function transferMoney(){
    const data = {
        fromAcc: document.getElementById("t-from-acc").value,
        toAcc: document.getElementById("t-to-acc").value,
        amount: document.getElementById("t-amount").value
    };
    fetch(BASE_URL+"/accounts/transfer", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
    })
    .then(response => response.text())
    .then(msg => {
        document.getElementById("transfer-result").innerText = msg;
            console.log("Amount is transferred successfully..!");
    })
}

// View Account
function viewAccount(){
    const accNo = document.getElementById("v-acc").value;
    fetch(BASE_URL+"/accounts/"+accNo, {
        method: "GET",
        headers: { "Content-Type": "application/json" }
    })
    .then(response => response.json())
    .then(result => {
        document.getElementById("view-result").innerText = JSON.stringify(result, null, 2);
    })
}

// View All Accounts
function viewAllAccounts(){
    fetch(BASE_URL+"/accounts/all", {
        method: "GET",
        headers: { "Content-Type": "application/json" }
    })
    .then(response => response.json())
    .then(result => {
        document.getElementById("viewall-result").innerText = JSON.stringify(result, null, 2);
    })
}